import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

// ì•½ê´€ ë‚´ìš©ì„ ì§ì ‘ ì •ì˜
const CONSENT_DATA = {
  type: 'unified_terms',
  version: 'v2.1',
  title: 'í”„ë¡¬í”„íŠ¸ ë±…í¬ ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ ì²˜ë¦¬ ë™ì˜ (í•„ìˆ˜)',
  content: `
# í”„ë¡¬í”„íŠ¸ ë±…í¬ ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ ì²˜ë¦¬ ë™ì˜ì„œ

## ðŸ“‹ ë™ì˜ì„œ ê°œìš” ë° ê¸°ë³¸ì‚¬í•­

ë³¸ ë™ì˜ì„œëŠ” í”„ë¡¬í”„íŠ¸ ë±…í¬ ì„œë¹„ìŠ¤ ì´ìš©ì— ê´€í•œ í¬ê´„ì ì¸ ì•½ê´€ìœ¼ë¡œ, ì„œë¹„ìŠ¤ì˜ ì„±ê²©, ê´€ë¦¬ìž ê¶Œí•œ, ê°œì¸ì •ë³´ ì²˜ë¦¬, ë©´ì±…ì‚¬í•­ ë“± ì„œë¹„ìŠ¤ ì´ìš©ê³¼ ê´€ë ¨ëœ ëª¨ë“  ì¤‘ìš”ì‚¬í•­ì„ í†µí•©í•˜ì—¬ ê·œì •í•˜ê³  ìžˆìŠµë‹ˆë‹¤.

ë³¸ ì„œë¹„ìŠ¤ëŠ” ì‚¬ìš©ìžê°€ í”„ë¡¬í”„íŠ¸ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  í™œìš©í•  ìˆ˜ ìžˆë„ë¡ ë•ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ, ì„œë¹„ìŠ¤ì˜ ì•ˆì •ì ì¸ ìš´ì˜ê³¼ í’ˆì§ˆ í–¥ìƒì„ ìœ„í•´ ê´€ë¦¬ìžëŠ” ì‹œìŠ¤í…œ ë‚´ ëª¨ë“  ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìžˆëŠ” ê¶Œí•œì„ ë³´ìœ í•˜ê³  ìžˆìŠµë‹ˆë‹¤.

**ë³¸ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ëž˜ ëª¨ë“  ë‚´ìš©ì— ëŒ€í•œ ë™ì˜ê°€ í•„ìˆ˜ì´ë©°, ë¶€ë¶„ì  ë™ì˜ëŠ” ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.**

## ì œ1ì¡° (ì„œë¹„ìŠ¤ì˜ ì„±ê²© ë° ëª©ì )

**1.1 ì„œë¹„ìŠ¤ ì •ì˜**
- ë³¸ ì„œë¹„ìŠ¤ëŠ” í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ë¥¼ ìœ„í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤.
- ì‚¬ìš©ìžëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±, ì €ìž¥, ë¶„ë¥˜, ê²€ìƒ‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

**1.2 ì„œë¹„ìŠ¤ ìš´ì˜ ë°©ì¹¨**
- ì„œë¹„ìŠ¤ëŠ” ì œê³µìžì˜ íŒë‹¨ì— ë”°ë¼ ì–¸ì œë“ ì§€ ë³€ê²½ë˜ê±°ë‚˜ ì¤‘ë‹¨ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
- ì„œë¹„ìŠ¤ ì´ìš© ëª©ì ì€ ì œí•œí•˜ì§€ ì•Šìœ¼ë©°, ì‚¬ìš©ìžê°€ ìžìœ ë¡­ê²Œ í™œìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
- ë‹¨, ë¶ˆë²•ì ì´ê±°ë‚˜ ë¶€ì ì ˆí•œ ìš©ë„ë¡œì˜ ì‚¬ìš©ì€ ê¸ˆì§€ë©ë‹ˆë‹¤.

## ì œ2ì¡° (ê´€ë¦¬ìž ê¶Œí•œ ë° ë°ì´í„° ì ‘ê·¼)

**ì„œë¹„ìŠ¤ì˜ ì•ˆì •ì  ìš´ì˜ê³¼ í’ˆì§ˆ í–¥ìƒì„ ìœ„í•´ ê´€ë¦¬ìžëŠ” ë‹¤ìŒê³¼ ê°™ì€ í¬ê´„ì  ê¶Œí•œì„ ê°€ì§€ë©°, ì‚¬ìš©ìžëŠ” ì´ì— ëŒ€í•´ ì‚¬ì „ ë™ì˜í•´ì•¼ í•©ë‹ˆë‹¤:**

**2.1 ë°ì´í„° ì ‘ê·¼ ê¶Œí•œ**
ê´€ë¦¬ìžëŠ” ì‚¬ìš©ìžì˜ ë™ì˜ ì—†ì´ ì–¸ì œë“ ì§€ ë‹¤ìŒ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:
- **í”„ë¡¬í”„íŠ¸ ì½˜í…ì¸ **: ì œëª©, ë³¸ë¬¸, ì¹´í…Œê³ ë¦¬, íƒœê·¸ë¥¼ í¬í•¨í•œ ëª¨ë“  í”„ë¡¬í”„íŠ¸ ë°ì´í„°
- **ì‚¬ìš© í†µê³„**: ì ‘ì† ì‹œê°„, ì‚¬ìš© ë¹ˆë„, ì„ í˜¸ ì¹´í…Œê³ ë¦¬, í™œë™ íŒ¨í„´ ë“±
- **ê°œì¸ ê¸°ë¡**: ê³„ì • ìƒì„±, í”„ë¡¬í”„íŠ¸ ìƒì„±/ìˆ˜ì •/ì‚­ì œ, ë¡œê·¸ì¸ ê¸°ë¡ ë“±
- **ê°œì¸ì •ë³´**: ì´ë¦„, ì´ë©”ì¼, ì ‘ì† IP, ì‚¬ìš© ê¸°ê¸° ì •ë³´ ë“±

**âš ï¸ ì¤‘ìš”: ì´ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ìœ„ ëª¨ë“  ë‚´ìš©ì— ëŒ€í•œ ì „ì²´ ë™ì˜ê°€ í•„ìˆ˜ì´ë©°, ë¶€ë¶„ì  ë™ì˜ë‚˜ ì¡°ê±´ë¶€ ë™ì˜ëŠ” ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.**
  `,
  isActive: true
}

async function main() {
  console.log('ì•½ê´€ ì‹œë”©ì„ ì‹œìž‘í•©ë‹ˆë‹¤...')
  
  try {
    // ConsentVersion í…Œì´ë¸”ì— ë°ì´í„° ì‚½ìž…
    const result = await prisma.consentVersion.upsert({
      where: {
        type_version: {
          type: CONSENT_DATA.type,
          version: CONSENT_DATA.version
        }
      },
      update: {
        title: CONSENT_DATA.title,
        content: CONSENT_DATA.content,
        isActive: CONSENT_DATA.isActive,
        activatedAt: new Date()
      },
      create: {
        type: CONSENT_DATA.type,
        version: CONSENT_DATA.version,
        title: CONSENT_DATA.title,
        content: CONSENT_DATA.content,
        isActive: CONSENT_DATA.isActive,
        activatedAt: new Date()
      }
    })
    
    console.log('âœ… ì•½ê´€ ì‹œë”©ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.')
    console.log('ðŸ“‹ ì‚½ìž…ëœ ì•½ê´€:', result.title)
  } catch (error) {
    console.error('âŒ ì•½ê´€ ì‹œë”© ì‹¤íŒ¨:', error)
    throw error
  }
}

main() 
  .catch((e) => {
    console.error(e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  }) 